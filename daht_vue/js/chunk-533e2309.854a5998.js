(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-533e2309"],{"33f9":function(e,t,a){"use strict";var r=a("8191"),n=a.n(r);n.a},8191:function(e,t,a){},"9e4f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paperlist"},[a("el-row",{staticClass:"paperlist-header",attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"试卷名",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.inputSearch,callback:function(t){e.inputSearch=t},expression:"inputSearch"}})],1),a("el-col",{attrs:{span:20}},[a("el-button",{on:{click:e.searchPaper}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addDiom}},[e._v("新增")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paperList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),a("el-table-column",{attrs:{label:"类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n       "+e._s(t.row.arr[0].papertype)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"papername",label:"试卷名"}}),a("el-table-column",{attrs:{prop:"datax",label:"建议时长"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("convertTime")(t.row.date,"YYYY-MM-DD")))]}}])}),a("el-table-column",{attrs:{width:"70",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"1"==t.row.status?"success":"danger"}},[e._v(e._s("1"==t.row.status?"启用":"禁用"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"360",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.hasUser(t.row)}}},[e._v(e._s("0"==t.row.status?"启用":"禁用"))]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.delPaper(t.row._id)}}},[e._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{title:"新增试卷",visible:e.addDio,width:"50%","destroy-on-close":"","before-close":e.coloseAddDio,center:""},on:{"update:visible":function(t){e.addDio=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.addPaperData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"题目类别",prop:"pid"}},[a("el-select",{model:{value:e.addPaperData.pid,callback:function(t){e.$set(e.addPaperData,"pid",t)},expression:" addPaperData.pid"}},e._l(e.paperType,(function(e){return a("el-option",{key:e._id,attrs:{label:e.papertype,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"试卷名",prop:"papername"}},[a("el-input",{model:{value:e.addPaperData.papername,callback:function(t){e.$set(e.addPaperData,"papername",t)},expression:"addPaperData.papername"}})],1),a("el-form-item",{attrs:{label:"建议时长",prop:"datax"}},[a("el-input",{attrs:{placeholder:"分钟"},model:{value:e.addPaperData.datax,callback:function(t){e.$set(e.addPaperData,"datax",t)},expression:"addPaperData.datax"}})],1),a("el-form-item",{attrs:{label:"随机题目"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"道数"},model:{value:e.sum,callback:function(t){e.sum=t},expression:"sum"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"title-btn",attrs:{type:"primary"},on:{click:e.setTitle}},[e._v("生成题目")])],1),a("el-col",{attrs:{span:4}},[e._v(e._s(e.addPaperData.title.length))])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.coloseAddDio}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)],1)},n=[],s=(a("96cf"),a("3b8d")),i={data:function(){return{sum:10,paperType:[],inputSearch:"",paperList:[],addDio:!1,addPaperData:{papername:"",pid:"5d9701a6c9ab7c0ca01ee3c5",title:[]},rules:{papername:[{required:!0,message:"必须输入试卷名",trigger:"blur"}],datax:[{required:!0,message:"必须输入建议时长",trigger:"blur"}]}}},created:function(){this.initData(),console.log(11)},methods:{initData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/paper");case 2:t=e.sent,this.paperList=t.data.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),searchPaper:function(){},addDiom:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getPaperType(),this.addDio=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPaperType:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/paper/papertype");case 2:t=e.sent,this.paperType=t.data.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),coloseAddDio:function(){this.addDio=!1,this.addPaperData={papername:"",pid:"5d9701a6c9ab7c0ca01ee3c5",title:[]}},setTitle:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/title/sum");case 2:for(t=e.sent,a=t.data.data,r=0;r<this.sum;r++)this.addPaperData.title.push(a[Math.floor(Math.random()*a.length)]);n=document.querySelector(".title-btn"),n.disabled=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,t.$http.post("/paper",t.addPaperData);case 3:r=e.sent,console.log(r),200==r.data.meta.status?(t.coloseAddDio(),t.initData(),t.$message({message:"添加试卷成功",type:"success"})):(t.coloseAddDio(),t.$message.error("添加试卷失败"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},hasUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.status="1"==t.status?"0":"1",console.log(t.status),e.next=4,this.$http.put("/paper/".concat(t._id),{status:t.status});case 4:a=e.sent,200==a.data.meta.status?(this.initData(),this.$message({message:"修改试卷状态成功",type:"success"})):this.$message.error("修改试卷状态失败");case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),delPaper:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.delete("/paper/".concat(t));case 2:a=e.sent,204==a.data.meta.status?(this.initData(),this.$message({message:"删除试卷成功",type:"success"})):this.$message.error("删除试卷失败");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},o=i,l=(a("33f9"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"2c004c68",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-533e2309.854a5998.js.map